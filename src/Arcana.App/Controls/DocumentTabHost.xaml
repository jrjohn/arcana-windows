<?xml version="1.0" encoding="utf-8"?>
<UserControl
    x:Class="Arcana.App.Controls.DocumentTabHost"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Arcana.App.Controls">

    <Grid>
        <TabView x:Name="DocumentTabs"
                 IsAddTabButtonVisible="False"
                 TabCloseRequested="DocumentTabs_TabCloseRequested"
                 CanReorderTabs="True"
                 CanDragTabs="True"
                 TabWidthMode="Equal"
                 SelectionChanged="DocumentTabs_SelectionChanged"
                 VerticalAlignment="Stretch"
                 HorizontalAlignment="Stretch">
            <TabView.Resources>
                <x:Double x:Key="TabViewItemHeaderMinWidth">80</x:Double>
                <x:Double x:Key="TabViewItemMaxWidth">200</x:Double>
            </TabView.Resources>
            <TabView.TabStripHeader>
                <StackPanel Orientation="Horizontal" Spacing="4" Padding="4,0">
                    <!-- Pop-out button for current document -->
                    <Button x:Name="PopOutButton"
                            ToolTipService.ToolTip="Pop out to floating window"
                            Click="PopOutButton_Click"
                            Padding="6,4"
                            Background="Transparent"
                            BorderThickness="0"
                            Visibility="Collapsed">
                        <FontIcon Glyph="&#xE8A7;" FontSize="12"/>
                    </Button>
                </StackPanel>
            </TabView.TabStripHeader>
            <TabView.TabStripFooter>
                <StackPanel Orientation="Horizontal" Spacing="4" Padding="4,0">
                    <!-- Document count indicator -->
                    <TextBlock x:Name="DocumentCountText"
                               Style="{StaticResource CaptionTextBlockStyle}"
                               VerticalAlignment="Center"
                               Opacity="0.6"/>
                </StackPanel>
            </TabView.TabStripFooter>
        </TabView>

        <!-- Empty state when no documents are open -->
        <Grid x:Name="EmptyState" Visibility="Collapsed"
              HorizontalAlignment="Center"
              VerticalAlignment="Center">
            <StackPanel Spacing="16" HorizontalAlignment="Center">
                <FontIcon Glyph="&#xE7C3;" FontSize="48" Opacity="0.3"/>
                <TextBlock x:Name="EmptyStateText"
                           Style="{StaticResource SubtitleTextBlockStyle}"
                           Opacity="0.5"
                           HorizontalAlignment="Center"/>
                <Button x:Name="CreateNewButton"
                        HorizontalAlignment="Center"
                        Click="CreateNewButton_Click">
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <FontIcon Glyph="&#xE710;" FontSize="14"/>
                        <TextBlock x:Name="CreateNewText"/>
                    </StackPanel>
                </Button>
            </StackPanel>
        </Grid>
    </Grid>
</UserControl>
